jQuery(document).ready(function($){$('.itcb-wp-color-picker').wpColorPicker();$('label[for="itcb-background-color"]').hide();if($('.itcb-background-image-url').attr('src')){$('.itcb-background-image-url').show()}else{$('.itcb-background-image-url').hide()}if($('input#itcb-background-image').val()){$('.itcb-add-media-text').hide();$('.itcb-remove-media, .itcb-background-image-options, .itcb-background-image-url').show()}else{$('.itcb-add-media-text').show();$('.itcb-remove-media, .itcb-background-image-options, .itcb-background-image-url').hide()}$('.itcb-remove-media').click(function(j){j.preventDefault();$('#itcb-background-image').val('');$('.itcb-add-media-text').show();$('.itcb-remove-media, .itcb-background-image-url, .itcb-background-image-options').hide()});var itcb_custom_backgrounds_frame;$('.itcb-add-media').click(function(j){j.preventDefault();if(itcb_custom_backgrounds_frame){itcb_custom_backgrounds_frame.open();return}itcb_custom_backgrounds_frame=wp.media.frames.itcb_custom_backgrounds_frame=wp.media({className:'media-frame itcb-custom-background-per-page-frame',frame:'select',multiple:false,title:itcb_custom_backgrounds.title,library:{type:'image'},button:{text:itcb_custom_backgrounds.button}});itcb_custom_backgrounds_frame.on('select',function(){var media_attachment=itcb_custom_backgrounds_frame.state().get('selection').first().toJSON();$('#itcb-background-image').val(media_attachment.id);$('.itcb-background-image-url').attr('src',media_attachment.url);$('.itcb-add-media-text').hide();$('.itcb-background-image-url, .itcb-remove-media, .itcb-background-image-options').show()});itcb_custom_backgrounds_frame.open()})});